(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{123:function(e,t,n){"use strict";n.d(t,"c",function(){return d}),n.d(t,"d",function(){return f}),n.d(t,"b",function(){return p});var a=n(4),r=n.n(a),c=n(11),o=n(2),s=n(16),u=n(26),i=n(15),l={validateUserNameStatus:"",help:""};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"register/VALIDATE_USERNAME":return Object(o.a)({},e,{validateUserNameStatus:t.status,help:t.help});default:return e}};var d=function(e){return{type:"register/VALIDATE_USERNAME",status:e,help:arguments.length>1&&void 0!==arguments[1]?arguments[1]:""}},f=function(e){return function(){var t=Object(c.a)(r.a.mark(function t(n){var a,c,o,u,l;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.userName,t.prev=1,n(d("validating")),t.next=5,Object(s.a)("/register/validate_username",{userName:a},"post");case 5:c=t.sent,o=Object(i.a)(c),u=o.code,l=o.msg,1===u?n(d("error",l)):0===u&&n(d("success")),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),n(d("error","\u8bf7\u68c0\u67e5\u7f51\u7edc\u72b6\u51b5")),console.log(t.t0);case 14:case"end":return t.stop()}},t,this,[[1,10]])}));return function(e){return t.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(c.a)(r.a.mark(function t(n){var a,c,o,l;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s.a)("/register",e,"post");case 3:a=t.sent,c=Object(i.a)(a),o=c.code,l=c.data,0===o&&(window.localStorage.setItem("token",l.token),n(Object(u.e)(l))),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}},t,this,[[0,8]])}));return function(e){return t.apply(this,arguments)}}()}},15:function(e,t,n){"use strict";function a(e){var t=e.data,n=t.msg;return{code:t.code,msg:n,data:e.data.data}}n.d(t,"a",function(){return a})},150:function(e,t,n){e.exports=n(249)},16:function(e,t,n){"use strict";var a=n(2),r=(n(140),n(91)),c=n.n(r),o=(n(84),n(13)),s=n.n(o),u=n(127),i=n.n(u),l=n(23),d=n(88),f=i.a.create({baseURL:d.a.imageBaseAddress,timeout:5e3,responseType:"json"});f.interceptors.request.use(function(e){return e},function(e){return s.a.error(e,2),Promise.reject(e)}),f.interceptors.response.use(function(e){var t=e.data.msg;return 0===e.data.code&&e.data.isShow&&s.a.success(t,2),e},function(e){if(e.response)switch(e.response.status){case 403:s.a.warning("\u6ca1\u6709\u6743\u9650",2);break;case 401:s.a.error("\u8eab\u4efd\u9a8c\u8bc1\u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55\uff01",2),window.localStorage.getItem("token")&&window.localStorage.removeItem("token"),c.a.confirm({title:"\u8eab\u4efd\u9a8c\u8bc1\u8fc7\u671f\uff0c\u662f\u5426\u524d\u5f80\u767b\u5f55",onOk:function(){l.a.dispatch({type:"route/LINK_TO",path:"/login",isTo:!0}),l.a.dispatch({type:"route/LINK_TO",path:"/login",isTo:!1})},onCancel:function(){},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"});break;case 500:s.a.error("\u670d\u52a1\u5668\u51fa\u9519\uff01",23);break;case 504:s.a.error("\u7f51\u7edc\u8d85\u65f6\uff01",2)}else s.a.error("\u8bf7\u6c42\u8d85\u65f6",2);return Promise.reject(e)});var p=f;t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return new Promise(function(r,c){var o;if("GET"===n){var s="";Object.keys(t).forEach(function(e){s+=e+"="+t[e]+"&"}),""!==s&&(s=s.substring(0,s.lastIndexOf("&")),e=e+"?"+s),o=p.get(e)}else o=p.post(e,Object(a.a)({},t,{token:window.localStorage.getItem("token")}));o.then(function(e){r(e)}).catch(function(e){c(e)})})}},23:function(e,t,n){"use strict";var a=n(27),r={},c=n(99),o=n(123),s=n(26),u=n(2),i={path:"/",isTo:!1},l=n(97),d=n(87),f=Object(a.c)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type,e},login:c.a,register:o.a,global:s.b,route:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"route/LINK_TO":return Object(u.a)({},e,{path:t.path,isTo:t.isTo});default:return e}},flagSetting:l.a,discuss:d.b}),p=n(129),h=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||a.d)(Object(a.a)(p.a)),b=Object(a.e)(f,h);t.a=b},248:function(e,t,n){},249:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(9),o=n.n(c),s=n(52),u=n(23);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=n(130),l=n.n(i),d=n(35),f=n(36),p=n(38),h=n(37),b=n(39),v=n(32),g=n(85),m=n(4),O=n.n(m),S=n(11);function E(e){return function(t){function n(e){var t;return Object(d.a)(this,n),(t=Object(p.a)(this,Object(h.a)(n).call(this,e))).state={component:null},t}return Object(b.a)(n,t),Object(f.a)(n,[{key:"componentDidMount",value:function(){var t=Object(S.a)(O.a.mark(function t(){var n,a;return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:n=t.sent,a=n.default,this.setState({component:a});case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.component;return e?r.a.createElement(e,this.props):null}}]),n}(a.Component)}var j=E(function(){return Promise.all([n.e(2),n.e(3),n.e(5),n.e(16),n.e(19)]).then(n.bind(null,849))}),T=E(function(){return n.e(21).then(n.bind(null,842))}),k=E(function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(4),n.e(14)]).then(n.bind(null,851))}),w=E(function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(4),n.e(15)]).then(n.bind(null,843))}),_=[{path:"/",component:T,exact:!0},{path:"/",component:j,children:[{path:"/home",exact:!0,component:E(function(){return Promise.all([n.e(0),n.e(2),n.e(3),n.e(1),n.e(8)]).then(n.bind(null,848))})},{path:"/login",exact:!0,component:k},{path:"/register",exact:!0,component:w},{path:"/profile",exact:!0,component:E(function(){return Promise.all([n.e(0),n.e(3),n.e(1),n.e(5),n.e(11)]).then(n.bind(null,850))})},{path:"/detail/:id",exact:!0,component:E(function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(4),n.e(10)]).then(n.bind(null,844))})},{path:"/record",exact:!0,component:E(function(){return Promise.all([n.e(0),n.e(3),n.e(13),n.e(20)]).then(n.bind(null,845))})},{path:"/recommend",exact:!0,component:E(function(){return Promise.all([n.e(17),n.e(18)]).then(n.bind(null,846))})},{path:"/rank",exact:!0,component:E(function(){return Promise.all([n.e(0),n.e(3),n.e(4),n.e(5),n.e(12)]).then(n.bind(null,847))})}]}],y=function(e){function t(e){var n;return Object(d.a)(this,t),n=Object(p.a)(this,Object(h.a)(t).call(this,e)),u.a.subscribe(function(){u.a.getState().route.isTo&&e.history.push(u.a.getState().route.path)}),n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.children)}}]),t}(r.a.Component),x=n(26),L=function e(t){var n=[];return t.forEach(function(t){return function(t){if(t.component&&t.children){var a=e(t.children);n.push(r.a.createElement(v.b,{key:t.path,path:t.path,exact:!!t.exact&&t.exact,render:function(e){return r.a.createElement(t.component,e,a)}}))}else n.push(r.a.createElement(v.b,{key:t.path,path:t.path,component:t.component,exact:!!t.exact&&t.exact}))}(t)}),r.a.createElement(v.d,null,n)},I=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=window.localStorage.getItem("token"),t=this.props.handleCheckToken;e&&"undefined"!==e&&t(e)}},{key:"render",value:function(){var e=L(_);return r.a.createElement(g.a,null,r.a.createElement(v.b,{path:"/",render:function(t){return r.a.createElement(y,t,e)}}))}}]),t}(r.a.Component),A=Object(s.b)(null,function(e){return{handleCheckToken:function(t){e(Object(x.a)(t))}}})(I),C=(n(248),document.getElementById("root"));l.a.attach(document.body),o.a.render(r.a.createElement(s.a,{store:u.a},r.a.createElement(A,null)),C),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},26:function(e,t,n){"use strict";n.d(t,"e",function(){return d}),n.d(t,"a",function(){return f}),n.d(t,"c",function(){return p}),n.d(t,"d",function(){return h});var a=n(4),r=n.n(a),c=n(11),o=n(19),s=n(2),u=n(16),i=n(15),l={userInfo:{token:"",userName:"",sex:"",email:"",avatar:"",nickname:"",score:0},allTasks:[],rank:[]};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"global/SET_USER_INFO":var n=t.userInfo;return Object(s.a)({},e,{userInfo:n});case"global/SET_ALLTASKS":return Object(s.a)({},e,{allTasks:Object(o.a)(t.data)});case"global/SET_RANK":return Object(s.a)({},e,{rank:Object(o.a)(t.data)});default:return e}};var d=function(e){return{type:"global/SET_USER_INFO",userInfo:e}},f=function(e){return function(){var t=Object(c.a)(r.a.mark(function t(n){var a,c,o,s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(u.a)("/check_token",{token:e},"post");case 3:a=t.sent,c=Object(i.a)(a),o=c.code,s=c.data,0===o&&n(d(s)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}},t,this,[[0,8]])}));return function(e){return t.apply(this,arguments)}}()},p=function(e){return{type:"global/SET_ALLTASKS",data:e}},h=function(e){return{type:"global/SET_RANK",data:e}}},87:function(e,t,n){"use strict";n.d(t,"a",function(){return p}),n.d(t,"f",function(){return h}),n.d(t,"e",function(){return b}),n.d(t,"d",function(){return v}),n.d(t,"c",function(){return g});var a=n(4),r=n.n(a),c=n(11),o=n(19),s=n(2),u=n(16),i=n(15),l={items:[],pageList:{},total:0,fetchListPending:!1,fetchListError:null,listNeedReload:!1,loadEnd:!1,userInfo:{},comments:[],articles:[]};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"discuss/FETCH_LIST_BEGIN":return Object(s.a)({},e,{fetchListPending:!0,fetchListError:null});case"discuss/FETCH_LIST_SUCCESS":var n={};return n[t.data.page]=!0,Object(s.a)({},e,{items:[].concat(Object(o.a)(e.items),Object(o.a)(t.data.items)),pageList:Object(s.a)({},e.pageList,n),fetchListPending:!1,fetchListError:null});case"discuss/FETCH_LIST_ERROR":return Object(s.a)({},e,{fetchListPending:!0,fetchListError:t.data});case"discuss/ADD_LIST_ITEM":return Object(s.a)({},e,{items:[t.data].concat(Object(o.a)(e.items))});case"discuss/SET_USERINFO":return Object(s.a)({},e,{userInfo:Object(s.a)({},t.data)});case"discuss/SET_COMMENTS":return Object(s.a)({},e,{comments:Object(o.a)(t.data)});case"discuss/SET_ARTICLES":return Object(s.a)({},e,{articles:Object(o.a)(t.data)});case"discuss/SET_LOADEND":return Object(s.a)({},e,{loadEnd:!0});default:return e}};var d=function(e){return{type:"discuss/FETCH_LIST_SUCCESS",data:e}},f=function(e){return{type:"discuss/FETCH_LIST_ERROR",data:e}},p=function(e){return{type:"discuss/ADD_LIST_ITEM",data:e}},h=function(e){return{type:"discuss/SET_USERINFO",data:e}},b=function(e){return{type:"discuss/SET_COMMENTS",data:e}},v=function(e){return{type:"discuss/SET_ARTICLES",data:e}},g=function(e){return function(){var t=Object(c.a)(r.a.mark(function t(n){var a,c,o,l,p;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"discuss/FETCH_LIST_BEGIN"}),t.next=3,Object(u.a)("/getDailyPunch",{page:e});case 3:a=t.sent,c=Object(i.a)(a),o=c.code,l=c.msg,0===(p=c.data).items.length&&n({type:"discuss/SET_LOADEND"}),n(0===o?d(Object(s.a)({},p,{page:e})):f(l));case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},88:function(e,t,n){"use strict";t.a={imageBaseAddress:"/setFlag"}},97:function(e,t,n){"use strict";n.d(t,"b",function(){return p}),n.d(t,"c",function(){return h});var a=n(4),r=n.n(a),c=n(11),o=n(19),s=n(2),u=n(16),i=n(15),l={isLoaded:!1,isSuccess:!1,flags:[],visible:!1,confirmLoading:!1,tasks:[]};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"flagSetting/SET_LOADED":return Object(s.a)({},e,{isLoaded:t.isLoaded});case"flagSetting/SET_SUCCESS":return Object(s.a)({},e,{isSuccess:t.isSuccess});case"flagSetting/SET_FLAGS":return Object(s.a)({},e,{flags:Object(o.a)(t.flags)});case"flagSetting/SET_TASKS":return Object(s.a)({},e,{tasks:Object(o.a)(t.tasks)});default:return e}};var d=function(e){return{type:"flagSetting/SET_LOADED",isLoaded:e}},f=function(e){return{type:"flagSetting/SET_SUCCESS",isSuccess:e}},p=function(e){var t=e.offset,n=e.page;return function(){var e=Object(c.a)(r.a.mark(function e(a){var o,s,l,p;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(d(!0)),a(f(!1)),e.next=5,Object(u.a)("/getFlags",{offset:t,page:n});case 5:o=e.sent,s=Object(i.a)(o),l=s.code,p=s.data,0===l&&setTimeout(Object(c.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a(d(!1)),a(f(!0)),a({type:"flagSetting/SET_FLAGS",flags:p});case 3:case"end":return e.stop()}},e,this)})),500),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(t){return e.apply(this,arguments)}}()},h=function(){return function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a,c,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.localStorage.getItem("token")){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(u.a)("/getTasks",{token:window.localStorage.getItem("token")||""});case 4:n=e.sent,a=Object(i.a)(n),c=a.code,o=a.data,0===c&&t({type:"flagSetting/SET_TASKS",tasks:o});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}},99:function(e,t,n){"use strict";n.d(t,"b",function(){return p}),n.d(t,"c",function(){return h});n(84);var a=n(13),r=n.n(a),c=n(4),o=n.n(c),s=n(11),u=n(2),i=n(16),l=n(26),d=n(15),f={username:"",avatar:""};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"login/GET_AVATAR":return Object(u.a)({},e,{avatar:t.avatar,username:t.username});default:return e}};var p=function(e){return function(){var t=Object(s.a)(o.a.mark(function t(n){var a,r,c,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(i.a)("/login/getAvator",{username:e},"post");case 3:a=t.sent,r=Object(d.a)(a),c=r.code,s=r.data,0===c&&n({type:"login/GET_AVATAR",avatar:(o={avatar:s.avatar,username:e}).avatar,username:o.username}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}var o},t,this,[[0,8]])}));return function(e){return t.apply(this,arguments)}}()},h=function(e){return function(){var t=Object(s.a)(o.a.mark(function t(n){var a,c,s,f,p;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r.a.loading("\u6b63\u5728\u767b\u5f55...",0),t.next=4,Object(i.a)("/login",Object(u.a)({},e),"post");case 4:a=t.sent,c=Object(d.a)(a),s=c.code,f=c.msg,p=c.data,r.a.destroy(),0===s?(r.a.success(f,2),n(Object(l.e)(p)),window.localStorage.setItem("token",p.token)):r.a.error(f,3),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(0),r.a.destroy(),r.a.error("\u767b\u5f55\u5931\u8d25,\u8bf7\u68c0\u67e5\u7f51\u7edc\u72b6\u51b5",3),console.log(t.t0);case 15:case"end":return t.stop()}},t,this,[[0,10]])}));return function(e){return t.apply(this,arguments)}}()}}},[[150,7,9]]]);
//# sourceMappingURL=main.b5e541eb.chunk.js.map